<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Guess the Lie</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Game Font -->
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg:#ffffff;
  --card:#ffffff;
  --text:#111;
  --muted:#666;
  --green:#2ecc71;
  --red:#e74c3c;
}

/* Weather themes */
body.sunny { --bg:#fff9ec; }
body.rainy { --bg:#f1f5f9; }
body.night { --bg:#0f172a; --text:#f8fafc; --card:#111827; }

body {
  margin:0;
  font-family:'Rubik',system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
  text-align:center;
  transition:background 0.4s;
}

#app {
  max-width:700px;
  margin:auto;
  padding:60px 30px;
}

h1 {
  font-size:3rem;
  font-weight:700;
  margin-bottom:10px;
}

#progress {
  color:var(--muted);
  margin-bottom:20px;
}

.statement {
  background:var(--card);
  border:1px solid #eee;
  border-radius:18px;
  padding:26px;
  margin:18px 0;
  font-size:1.1rem;
  cursor:pointer;
  transition:transform 0.15s, box-shadow 0.15s;
}

.statement:hover {
  transform:translateY(-2px);
  box-shadow:0 8px 20px rgba(0,0,0,0.06);
}

.statement.correct {
  background:#e9fff1;
  animation:pulse 0.4s;
}

.statement.wrong {
  background:#ffecec;
}

@keyframes pulse {
  0%{transform:scale(1)}
  50%{transform:scale(1.04)}
  100%{transform:scale(1)}
}

.statement.hidden { visibility:hidden }

#explanation {
  margin:20px 0;
  font-size:1rem;
  color:var(--muted);
}

.hud {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:30px 0 10px;
}

#dots { display:flex; gap:6px }
.dot {
  width:10px;
  height:10px;
  border-radius:50%;
  background:#ddd;
}
.dot.correct { background:var(--green) }
.dot.wrong { background:var(--red) }

.controls {
  display:flex;
  justify-content:space-between;
  gap:10px;
}

button {
  padding:12px 18px;
  border-radius:14px;
  border:1px solid #e5e5e5;
  background:#fff;
  font-size:0.95rem;
  cursor:pointer;
  transition:transform 0.12s, box-shadow 0.12s;
}
button:hover:not(:disabled){
  transform:translateY(-1px);
  box-shadow:0 6px 14px rgba(0,0,0,0.08);
}
button:disabled{opacity:0.4}

.hidden{display:none}
</style>
</head>

<body>
<div id="app">

<h1>Guess the Lie</h1>
<div id="progress"></div>

<div id="game">
  <div class="statement"></div>
  <div class="statement"></div>
  <div class="statement"></div>

  <div id="explanation" class="hidden"></div>

  <div class="hud">
    <div id="dots"></div>
    <div id="timer">10s</div>
  </div>

  <div class="controls">
    <button id="skip">Skip</button>
    <button id="freeze">Freeze</button>
    <button id="fifty">50/50</button>
  </div>
</div>

<div id="end" class="hidden">
  <h2>That was interesting.</h2>
  <p id="finalScore"></p>
  <button onclick="startGame()">Play again</button>
</div>

</div>

<script>
/* ---------------- QUESTIONS (ADD MORE HERE) ---------------- */
const QUESTIONS = [
  {
    statements:[
      "Penguins can fly.",
      "Penguins are birds.",
      "Penguins are excellent swimmers."
    ],
    answer:0,
    why:"Penguins are flightless birds adapted for swimming."
  },
  {
    statements:[
      "Google was originally called Backrub.",
      "The first iPhone had a front camera.",
      "Wi-Fi stands for Wireless Fidelity."
    ],
    answer:1,
    why:"The first iPhone (2007) had no front-facing camera."
  }
];

/* ---------------- DAILY SEED ---------------- */
const seed = new Date().toDateString();
function seededShuffle(arr){
  let s = [...arr];
  let h = [...seed].reduce((a,c)=>a+c.charCodeAt(0),0);
  return s.sort(()=> (h=Math.sin(h)*10000)%1-0.5);
}

/* ---------------- WEATHER THEME ---------------- */
(function(){
  const h = new Date().getHours();
  if(h>=19||h<6) document.body.classList.add("night");
  else if(Math.random()>0.5) document.body.classList.add("rainy");
  else document.body.classList.add("sunny");
})();

/* ---------------- GAME LOGIC ---------------- */
const TOTAL = 10, TIME = 10;
let pool=[], idx=0, answered=0, score=0, locked=false;
let timer=null, timeLeft=TIME, freezeUsed=false, fiftyUsed=false;

const cards = document.querySelectorAll(".statement");
const dotsEl = document.getElementById("dots");
const timerEl = document.getElementById("timer");
const progressEl = document.getElementById("progress");
const explainEl = document.getElementById("explanation");
const gameEl = document.getElementById("game");
const endEl = document.getElementById("end");
const finalScore = document.getElementById("finalScore");

const sndClick = new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQAAAAA=");
const sndGood = sndClick.cloneNode();
const sndBad = sndClick.cloneNode();

function initDots(){
  dotsEl.innerHTML="";
  for(let i=0;i<TOTAL;i++) dotsEl.innerHTML+="<span class='dot'></span>";
}

function startGame(){
  pool = seededShuffle(QUESTIONS);
  idx=answered=score=0;
  freezeUsed=fiftyUsed=false;
  gameEl.classList.remove("hidden");
  endEl.classList.add("hidden");
  initDots();
  next();
}

function next(){
  if(answered===TOTAL){ end(); return; }
  if(idx>=pool.length) pool=seededShuffle(pool),idx=0;

  locked=false; timeLeft=TIME;
  explainEl.classList.add("hidden");
  timerEl.textContent=timeLeft+"s";
  progressEl.textContent=`${answered+1} / ${TOTAL}`;

  const q = pool[idx++];
  cards.forEach((c,i)=>{
    c.className="statement";
    c.textContent=q.statements[i];
    c.onclick=()=>pick(i,q);
  });

  clearInterval(timer);
  timer=setInterval(()=>{
    timeLeft--; timerEl.textContent=timeLeft+"s";
    if(timeLeft<=0){ clearInterval(timer); answered++; mark(false); next(); }
  },1000);
}

function pick(i,q){
  if(locked) return;
  locked=true; clearInterval(timer);
  answered++;
  const ok=i===q.answer;
  if(ok) score++;
  cards.forEach((c,j)=>{
    if(j===q.answer) c.classList.add("correct");
    else if(j===i) c.classList.add("wrong");
  });
  mark(ok);
  explainEl.textContent=q.why;
  explainEl.classList.remove("hidden");
  setTimeout(next,1200);
}

function mark(ok){
  const d=dotsEl.children[answered-1];
  if(d) d.classList.add(ok?"correct":"wrong");
}

function end(){
  gameEl.classList.add("hidden");
  endEl.classList.remove("hidden");
  finalScore.textContent=`Score: ${score} / ${TOTAL}`;
}

/* Controls */
skip.onclick=()=>{ if(locked) return; locked=true; answered++; mark(false); next(); }
freeze.onclick=()=>{ if(freezeUsed) return; freezeUsed=true; timeLeft+=5; }
fifty.onclick=()=>{ if(fiftyUsed) return; fiftyUsed=true;
  const q=pool[idx-1];
  [0,1,2].filter(i=>i!==q.answer).slice(0,1)
    .forEach(i=>cards[i].classList.add("hidden"));
}

startGame();
</script>
</body>
</html>
